query: "select /* pgwatch_generated */\n  (extract(epoch from now()) * 1e9)::int8\
  \ as epoch_ns,\n  application_name as tag_application_name,\n  usename AS tag_usename,\n\
  \  concat(coalesce(client_addr::text, client_hostname), '_', client_port::text)\
  \ as tag_client_info,\n  coalesce(pg_wal_lsn_diff(case when pg_is_in_recovery()\
  \ then pg_last_wal_receive_lsn() else pg_current_wal_lsn() end, sent_lsn)::int8,\
  \ 0) as sent_lag_b,\n  coalesce(pg_wal_lsn_diff(case when pg_is_in_recovery() then\
  \ pg_last_wal_receive_lsn() else pg_current_wal_lsn() end, write_lsn)::int8, 0)\
  \ as write_lag_b,\n  coalesce(pg_wal_lsn_diff(case when pg_is_in_recovery() then\
  \ pg_last_wal_receive_lsn() else pg_current_wal_lsn() end, flush_lsn)::int8, 0)\
  \ as flush_lag_b,\n  coalesce(pg_wal_lsn_diff(case when pg_is_in_recovery() then\
  \ pg_last_wal_receive_lsn() else pg_current_wal_lsn() end, replay_lsn)::int8, 0)\
  \ as replay_lag_b,\n  (extract(epoch from write_lag) * 1000)::int8 as write_lag_ms,\n\
  \  (extract(epoch from flush_lag) * 1000)::int8 as flush_lag_ms,\n  (extract(epoch\
  \ from replay_lag) * 1000)::int8 as replay_lag_ms,\n  state,\n  sync_state,\n  case\
  \ when sync_state in ('sync', 'quorum') then 1 else 0 end as is_sync_int,\n  case\
  \ when pg_is_in_recovery() then 1 else 0 end as in_recovery_int\nfrom\n  pg_stat_replication\n\
  where\n  coalesce(application_name, '') not in ('pg_basebackup', 'pg_rewind');\n"
metrics: []
