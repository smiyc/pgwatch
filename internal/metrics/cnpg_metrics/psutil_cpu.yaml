query: "select /* pgwatch_generated */\n  (extract(epoch from now()) * 1e9)::int8\
  \ as epoch_ns,\n  round(cpu_utilization::numeric, 2)::float as cpu_utilization,\n\
  \  round(load_1m_norm::numeric, 2)::float as load_1m_norm,\n  round(load_1m::numeric,\
  \ 2)::float as load_1m,\n  round(load_5m_norm::numeric, 2)::float as load_5m_norm,\n\
  \  round(load_5m::numeric, 2)::float as load_5m,\n  round(\"user\"::numeric, 2)::float\
  \ as \"user\",\n  round(system::numeric, 2)::float as system,\n  round(idle::numeric,\
  \ 2)::float as idle,\n  round(iowait::numeric, 2)::float as iowait,\n  round(irqs::numeric,\
  \ 2)::float as irqs,\n  round(other::numeric, 2)::float as other\nfrom\n  get_psutil_cpu()\n"
metrics: []
init_sql: "CREATE EXTENSION IF NOT EXISTS plpython3u;\n\nCREATE OR REPLACE FUNCTION\
  \ get_psutil_cpu(\n\tOUT cpu_utilization float8, OUT load_1m_norm float8, OUT load_1m\
  \ float8, OUT load_5m_norm float8, OUT load_5m float8,\n    OUT \"user\" float8,\
  \ OUT system float8, OUT idle float8, OUT iowait float8, OUT irqs float8, OUT other\
  \ float8\n)\n LANGUAGE plpython3u\nAS $FUNCTION$\n\nfrom os import getloadavg\n\
  from psutil import cpu_times_percent, cpu_percent, cpu_count\nfrom threading import\
  \ Thread\n\nclass GetCpuPercentThread(Thread):\n    def __init__(self, interval_seconds):\n\
  \        self.interval_seconds = interval_seconds\n        self.cpu_utilization_info\
  \ = None\n        super(GetCpuPercentThread, self).__init__()\n\n    def run(self):\n\
  \        self.cpu_utilization_info = cpu_percent(self.interval_seconds)\n\nt = GetCpuPercentThread(0.5)\n\
  t.start()\n\nct = cpu_times_percent(0.5)\nla = getloadavg()\n\nt.join()\n\nreturn\
  \ t.cpu_utilization_info, la[0] / cpu_count(), la[0], la[1] / cpu_count(), la[1],\
  \ ct.user, ct.system, ct.idle, ct.iowait, ct.irq + ct.softirq, ct.steal + ct.guest\
  \ + ct.guest_nice\n\n$FUNCTION$;\n\nGRANT EXECUTE ON FUNCTION get_psutil_cpu() TO\
  \ pgwatch;\nCOMMENT ON FUNCTION get_psutil_cpu() IS 'created for pgwatch';\n"
